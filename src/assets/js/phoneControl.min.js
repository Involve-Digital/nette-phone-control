!function(e,t){if(e.Nette)if("function"==typeof define&&define.amd)define(function(){return t(e)});else if("object"==typeof module&&"object"==typeof module.exports)module.exports=t(e);else{var o=!e.Nette||!e.Nette.noInit;e.Nette.PhoneControl=t(e),o&&e.Nette.PhoneControl.initOnLoad()}}("undefined"!=typeof window?window:this,function(e){"use strict";var t={version:"1.0",options:{flag:!0,otherText:"-jin√©-",singleOptionPaddingOffset:15,multiOptionsPaddingOffset:20},initOnLoad:function(){Nette.onDocumentReady(function(){for(var e=document.querySelectorAll(".phone-control:not([data-initialized])"),o=0;o<e.length;o++)t.initControl(e[o]);document.onclick=function(e){if(!e.target.classList.contains("phone-control-selected"))for(var t=document.querySelectorAll(".phone-control-region-code"),o=0;o<t.length;o++)t[o].classList.remove("phone-control-active")},document.onkeyup=function(e){if("Escape"===e.code)for(var t=document.querySelectorAll(".phone-control-region-code"),o=0;o<t.length;o++)t[o].classList.remove("phone-control-active")},Nette.validators.InvolveFormsControlsPhoneControl_validateNumber=(e=>t.validateControl(e))})},initControl:function(e){var o=e,n=t.getRegionCodeControlByPhoneControl(o);if(o.hasAttribute("data-region-codes")){for(var i=JSON.parse(o.getAttribute("data-region-codes")),l=Object.keys(i),r=Object.values(i),a=parseInt(o.getAttribute("data-strict")),s=t.hasSingleOption(o),c=document.createElement("ul"),d="",u='<svg style="display:inline;position:relative;width:10px;top:1px;left:4px;" xmlns="http://www.w3.org/2000/svg"  x="0px" y="0px" viewBox="0 0 1000 1000" enable-background="new 0 0 1000 1000" xml:space="preserve">\n<g><path d="M961.2,236.5c-38.4-38.4-101.2-38.4-139.6,0L500,558L178.4,236.5c-38.4-38.4-101.2-38.4-139.6,0C0.4,274.9,0.4,337.6,38.8,376l388.1,388.1c20,20,46.8,29,73.1,28.1c26.5,0.9,53.1-8.1,73.1-28.1L961.3,376C999.6,337.6,999.6,274.8,961.2,236.5z"/></g>\n</svg>',p=0;p<r.length;p++)0===p&&(d='<li class="phone-control-selected">+'+r[p]+(s?"":u)+"</li>"),d=d+"<li>+"+r[p]+(t.options.flag?'<img src="https://flagcdn.com/16x12/'+l[p].toLowerCase()+'.png">':"")+"</li>";a||(d=d+'<li class="phone-control-other">'+t.options.otherText+"</li>"),c.classList.add("phone-control-region-code"),c.innerHTML=d;var v=c.querySelector(".phone-control-selected");v.onclick=function(e){if(e.stopPropagation(),"INPUT"!==document.activeElement.tagName){if(!s){for(var t=document.querySelectorAll(".phone-control-region-code"),o=0;o<t.length;o++)t[o]!==c&&t[o].classList.remove("phone-control-active");c.classList.toggle("phone-control-active")}}else c.classList.remove("phone-control-active")};for(var g=c.querySelectorAll("li:not([class])"),f=0;f<g.length;f++){g[f].onclick=function(){v.innerHTML=this.innerText+(s?"":u),c.classList.remove("phone-control-active"),t.setRegionCodeControlValue(void 0,n,v),t.adjustPhoneControlPadding(o,c),o.focus()}}if(!a)c.querySelector(".phone-control-other").onclick=function(){v.innerHTML='+<input type="tel">'+(s?"":u),c.classList.remove("phone-control-active");var e=v.querySelector("input");e.onkeyup=function(){this.value=this.value.replace(/[^0-9-]/g,""),t.setRegionCodeControlValue(void 0,n,v)},e.focus(),t.adjustPhoneControlPadding(o,c)};if(o.oninput=o.onchange=o.onpaste=o.onkeyup=function(e){this.value.includes("+")?(c.classList.add("disabled"),t.setRegionCodeControlValue(null,n,v)):(c.classList.remove("disabled"),t.setRegionCodeControlValue(void 0,n,v)),t.adjustPhoneControlPadding(o,c),t.validateControl(o),e.stopPropagation()},o.parentNode.insertBefore(c,o),o.dataset.initialized=1,o.value.includes("+"))t.setRegionCodeControlValue(null,n,v),c.classList.add("disabled");else if(n.value){var h=n.value;t.setRegionCodeControlValue(h,n,v),r.includes(h.replace("+",""))?v.innerText=h:v.innerHTML='+<input type="tel" value="'+h.replace("+","")+'">'}else t.setRegionCodeControlValue(void 0,n,v);t.adjustPhoneControlPadding(o,c),t.validateControl(o)}},validateControl:function(e){if("undefined"==typeof libphonenumber)return console.warn('PhoneControl: for JS validation include "libphonenumber-js" library,or overwrite "Nette.PhoneControl.validateControl" with your own validation.'),!0;var o=t.getRegionCodeControlByPhoneControl(e);try{var n=new libphonenumber.parsePhoneNumber(o.value+e.value);if(!o.value&&e.getAttribute("data-strict")){var i=JSON.parse(e.getAttribute("data-region-codes"));i=Object.values(i),r=!1;for(var l=0;l<i.length;l++)e.value.startsWith("+"+i[l])&&(r=n.isValid())}else var r=n.isValid()}catch(e){r=!1}return r},hasSingleOption:function(e){var t=JSON.parse(e.getAttribute("data-region-codes")),o=Object.values(t),n=parseInt(e.getAttribute("data-strict"));return 1===o.length&&1===n},adjustPhoneControlPadding:function(e,o){var n=t.hasSingleOption(e);e.style.paddingLeft=o.offsetWidth+(n?t.options.singleOptionPaddingOffset:t.options.multiOptionsPaddingOffset)+"px"},setRegionCodeControlValue:function(e,t,o){void 0===e?o.innerHTML.includes("input")?t.value="+"+o.querySelector("input").value:t.value=o.innerText:t.value=e},getRegionCodeControlByPhoneControl:function(e){var t=e.getAttribute("name");return e.closest("form").querySelector('[name*="'+t.substring(0,t.length-1)+'"][name*="RegionCode"]')}};return t});
